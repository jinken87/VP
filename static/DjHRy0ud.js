import{A as S,C as V,h as l,D as $,T as N,c as b,o as f,a as s,m as e,U as T,t as n,l as C,V as I,g as U,r as j,j as k,b as g,G as L,F as A}from"./DzOnPd9k.js";import{u as P,_ as B}from"./CEnNqy5r.js";const E={class:"bg-white rounded-lg shadow p-6"},F={class:"text-2xl font-bold mb-4"},M={class:"text-sm font-bold mb-4"},O={class:"flex items-center justify-between"},z=["src","alt"],G={class:"font-medium"},R={class:"text-sm text-gray-500"},q={class:"text-sm text-gray-500"},H={__name:"VideoDesc",props:{videoData:{type:Object,default:()=>{}}},setup(p){const u=p,{t:a}=S(),{$dayjs:v}=V(),t=l(()=>u.videoData),r=$(),d=P(),m=l(()=>r.userInfo),c=l(()=>m.value.id),_=l(()=>{var o;return((o=m.value)==null?void 0:o.username)===t.value.username}),x=()=>{d.fetchSubscriptions(c.value)},D=async o=>{if(!r.isAuthenticated){r.showDialog();return}d.toggleSubscription(c.value,o)},w=o=>v(o).fromNow(),y=o=>d.isSubscribed(o);return N(()=>{c.value&&(console.log("載入訂閱資料: ",c.value),x(c.value))}),(o,i)=>(f(),b("div",E,[s("div",null,[s("div",F,[s("span",{class:"cursor-pointer",onClick:i[0]||(i[0]=h=>("goToDetail"in o?o.goToDetail:e(T))(e(t).id))},n(e(t).title),1)]),s("div",M,n(e(t).description||"-"),1)]),s("div",O,[s("div",{class:"flex items-center space-x-4 cursor-pointer",onClick:i[1]||(i[1]=h=>("goToUserInfo"in o?o.goToUserInfo:e(I))(e(t).username))},[s("img",{src:e(t).thumbnail,alt:e(t).channelName,class:"w-12 h-12 rounded-full"},null,8,z),s("div",null,[s("p",G,n(e(t).username),1),s("p",R,n(e(a)("subscription_count",{count:e(t).subscribed})),1),s("div",q,[s("span",null,n(e(a)("views",{times:e(t).views||0})),1),i[3]||(i[3]=s("span",null,n(" • "),-1)),s("span",null,n(w(e(t).created_at)),1)])])]),e(_)?C("",!0):(f(),b("button",{key:0,class:"px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600",onClick:i[2]||(i[2]=h=>D(e(t).user_id))},n(y(e(t).user_id)?"取消訂閱":e(a)("subscribe")),1))])]))}},J={class:"flex"},K={class:"aspect-w-16 aspect-h-9 flex flex-col mx-4 gap-2"},Q=["src","poster"],W={class:"flex-1 h-[600px] pr-2"},Z={__name:"VideoPlayer",props:{videoData:{type:Object,default:()=>({})}},setup(p){const u=p,a=U(),v=l(()=>a.videoPointerNone),t=l(()=>a.videoList),r=l(()=>u.videoData);return j({videoUrl:"https://videos.pexels.com/video-files/29716330/12777302_2560_1440_30fps.mp4",thumbnailUrl:"https://picsum.photos/800/450",title:"示例視頻標題",channelAvatarUrl:"https://picsum.photos/id/237/200/200",channelName:"示例頻道",subscriberCount:"100萬"}),k(async()=>{await a.getVideo(),console.log("影音列表:",t.value)}),(d,m)=>{const c=H,_=B;return f(),b(A,null,[s("div",J,[s("div",K,[s("video",{class:L(["w-[960px] h-[600px] object-cover rounded-lg",{"pointer-events-none":e(v)}]),src:e(r).url,controls:"",poster:e(r).thumbnail},null,10,Q),g(c,{videoData:u.videoData},null,8,["videoData"])]),s("div",W,[g(_,{videoList:e(t)},null,8,["videoList"])])]),s("div",null,n(e(r)),1)],64)}}};export{Z as _,H as a};
