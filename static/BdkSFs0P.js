import{m as S,A as V,j as c,C as $,V as N,c as b,o as f,a as s,q as e,W as C,t as a,x as I,X as T,D as j,r as k,f as U,b as g,G as L}from"./DzDDBNN_.js";import{u as A,_ as P}from"./DPwqnZr_.js";const B={class:"bg-white rounded-lg shadow p-6"},E={class:"text-2xl font-bold mb-4"},M={class:"text-sm font-bold mb-4"},O={class:"flex items-center justify-between"},q=["src","alt"],z={class:"font-medium"},G={class:"text-sm text-gray-500"},R={class:"text-sm text-gray-500"},W={__name:"VideoDesc",props:{videoData:{type:Object,default:()=>{}}},setup(p){const u=p,{t:n}=S(),{$dayjs:v}=V(),t=c(()=>u.videoData),l=$(),d=A(),m=c(()=>l.userInfo),r=c(()=>m.value.id),_=c(()=>{var o;return((o=m.value)==null?void 0:o.username)===t.value.username}),x=()=>{d.fetchSubscriptions(r.value)},D=async o=>{if(!l.isAuthenticated){l.showDialog();return}d.toggleSubscription(r.value,o)},w=o=>v(o).fromNow(),y=o=>d.isSubscribed(o);return N(()=>{r.value&&(console.log("載入訂閱資料: ",r.value),x(r.value))}),(o,i)=>(f(),b("div",B,[s("div",null,[s("div",E,[s("span",{class:"cursor-pointer",onClick:i[0]||(i[0]=h=>("goToDetail"in o?o.goToDetail:e(C))(e(t).id))},a(e(t).title),1)]),s("div",M,a(e(t).description||"-"),1)]),s("div",O,[s("div",{class:"flex items-center space-x-4 cursor-pointer",onClick:i[1]||(i[1]=h=>("goToUserInfo"in o?o.goToUserInfo:e(T))(e(t).username))},[s("img",{src:e(t).thumbnail,alt:e(t).channelName,class:"w-12 h-12 rounded-full"},null,8,q),s("div",null,[s("p",z,a(e(t).username),1),s("p",G,a(e(n)("subscription_count",{count:e(t).subscribed})),1),s("div",R,[s("span",null,a(e(n)("views",{times:e(t).views||0})),1),i[3]||(i[3]=s("span",null,a(" • "),-1)),s("span",null,a(w(e(t).created_at)),1)])])]),e(_)?I("",!0):(f(),b("button",{key:0,class:"px-4 py-2 rounded bg-red-500 text-white hover:bg-red-600",onClick:i[2]||(i[2]=h=>D(e(t).user_id))},a(y(e(t).user_id)?e(n)("unsubscribe"):e(n)("subscribe")),1))])]))}},X={class:"flex"},F={class:"aspect-w-16 aspect-h-9 flex flex-col mx-4 gap-2"},H=["src","poster"],J={class:"flex-1 h-[600px] pr-2"},Y={__name:"VideoPlayer",props:{videoData:{type:Object,default:()=>({})}},setup(p){const u=p,n=j(),v=c(()=>n.videoPointerNone),t=c(()=>n.videoList),l=c(()=>u.videoData);return k({videoUrl:"https://videos.pexels.com/video-files/29716330/12777302_2560_1440_30fps.mp4",thumbnailUrl:"https://picsum.photos/800/450",title:"示例視頻標題",channelAvatarUrl:"https://picsum.photos/id/237/200/200",channelName:"示例頻道",subscriberCount:"100萬"}),U(async()=>{await n.getVideo(),console.log("影音列表:",t.value)}),(d,m)=>{const r=W,_=P;return f(),b("div",X,[s("div",F,[s("video",{class:L(["w-[960px] h-[600px] object-cover rounded-lg",{"pointer-events-none":e(v)}]),src:e(l).url,controls:"",poster:e(l).thumbnail},null,10,H),g(r,{videoData:u.videoData},null,8,["videoData"])]),s("div",J,[g(_,{videoList:e(t)},null,8,["videoList"])])])}}};export{Y as _,W as a};
