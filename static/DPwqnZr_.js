import{m,j as _,l as h,c as u,o as l,a as o,t as a,q as c,F as f,v as g,d as v,y as S,Y as w,z as y,Q as x,B as L,r as d,Z as k}from"./DzDDBNN_.js";const B={class:"h-full bg-white rounded-lg shadow overflow-auto"},T={class:"text-xl font-bold mb-4"},V={class:"space-y-4"},j=["src","alt"],P={class:"font-medium"},R={class:"text-sm text-gray-500"},q={class:"text-sm text-gray-500"},N={__name:"RecommendedVideos",props:{videoList:{type:Array,default:()=>[]}},setup(i){const e=i,{t:r}=m(),b=_(()=>e.videoList);return h(()=>e.videoList,()=>{console.log("0987654dfghjkl7777777",e.videoList)}),(n,t)=>(l(),u("div",B,[o("h2",T,a(c(r)("recommended_videos")),1),o("div",V,[(l(!0),u(f,null,g(c(b),s=>(l(),u("div",{key:s.id,class:"flex space-x-4"},[o("img",{src:s.thumbnail,alt:s.title,class:"w-40 h-24 object-cover rounded"},null,8,j),o("div",null,[o("h3",P,a(s.title),1),o("p",R,a(s.description),1),o("p",q,[v(a(c(r)("views",{times:s.views||0}))+" · ",1),o("span",null,a(("getPassTime"in n?n.getPassTime:c(S))(s.created_at)),1)])])]))),128))])]))}},z=w("suscriptions",()=>{const i=k();y(),x(),L(),d(null),d([]);const e=d(new Set);return{subscriptions:e,isSubscribed:t=>(console.log(e.value,"subscriptions.value"),console.log(e.value.has(t),"subscriptions.value.has(channelId)"),e.value.has(t)),toggleSubscription:async(t,s)=>{if(console.log(t,"userId"),!t)return alert("請先登入");e.value.has(s)?(await i.from("subscriptions").delete().match({subscriber_id:t,subscribed_to:s}),e.value.delete(s)):(await i.from("subscriptions").insert({subscriber_id:t,subscribed_to:s}),e.value.add(s))},fetchSubscriptions:async t=>{const{data:s}=await i.from("subscriptions").select("subscribed_to").eq("subscriber_id",t);e.value=new Set((s==null?void 0:s.map(p=>p.subscribed_to))||[])}}});export{N as _,z as u};
